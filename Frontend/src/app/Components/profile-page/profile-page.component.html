<!-- Profile 1 - Bootstrap Brain Component -->
<app-header />
<app-loader *ngIf="isLoading"></app-loader>
<section class="bg-light py-3 py-md-5 py-xl-8 main-container">
  <div class="container">
    <div class="row gy-4 gy-lg-0 main-container">
      <div class="col-12 col-lg-4 col-xl-3">
        <div class="row gy-4">
          <div class="col-12">
            <div
              id="sidePanel1"
              class="card widget-card border-light shadow-sm"
            >
              <div class="card-header">Welcome, {{ user.firstName }}</div>
              <div class="card-body">
                <div id="imageDiv" class="text-center mb-3">
                  <img [src]="user.profilePicture" alt="Profile Picture" />
                </div>
                <div class="text-center mb-1">
                  {{ user.firstName + " " + user.lastName }}
                </div>
                <p class="text-center text-secondary mb-4">
                  {{ user.designation }}
                </p>
                <ul class="list-group list-group-flush mb-4">
                  <li
                    class="list-group-item d-flex justify-content-between align-items-center"
                    style="background: none"
                  >
                    <h6 class="m-0">Connections</h6>
                    <span>{{ connections }}</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-12">
            <div class="card widget-card border-light shadow-sm">
              <div class="card-header">About Me</div>
              <div class="card-body">
                <ul class="list-group list-group-flush mb-0">
                  <li class="list-group-item">
                    <h6 class="mb-1">
                      <span class="bii bi-mortarboard-fill me-2"></span>
                      Department
                    </h6>
                    <span>{{ user.departament }}</span>
                  </li>
                  <li class="list-group-item">
                    <h6 class="mb-1">
                      <span class="bii bi-geo-alt-fill me-2"></span>
                      Location
                    </h6>
                    <span>{{ user.location }}</span>
                  </li>
                  <li class="list-group-item">
                    <h6 class="mb-1">
                      <span class="bii bi-building-fill-gear me-2"></span>
                      Designation
                    </h6>
                    <span>{{ user.designation }}</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-8 col-xl-9 main-div-2">
        <div class="card widget-card border-light shadow-sm">
          <div class="card-body p-4 main-div-2">
            <ul class="nav nav-tabs" id="profileTab" role="tablist">
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="overview-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#overview-tab-pane"
                  type="button"
                  role="tab"
                  aria-controls="overview-tab-pane"
                  aria-selected="true"
                  (click)="setActiveTab('overview')"
                  [class.active]="activeTab === 'overview'"
                >
                  Overview
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="profile-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#profile-tab-pane"
                  type="button"
                  role="tab"
                  aria-controls="profile-tab-pane"
                  aria-selected="false"
                  (click)="setActiveTab('profile')"
                  [class.active]="activeTab === 'profile'"
                >
                  Edit Profile
                </button>
              </li>
            </ul>
            <div class="tab-content pt-4" id="profileTabContent">
              <div
                *ngIf="activeTab === 'overview'"
                class="tab-pane fade show active"
                id="overview-tab-pane"
                role="tabpanel"
                aria-labelledby="overview-tab"
                tabindex="0"
              >
                <h5 class="mb-3 profile-title">My Details</h5>
                <div class="row g-0">
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">First Name</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.firstName }}</div>
                  </div>
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">Last Name</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.lastName }}</div>
                  </div>
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">Email</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.email }}</div>
                  </div>
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">Phone</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.phone }}</div>
                  </div>
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">Username</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.username }}</div>
                  </div>
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">Department</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.departament }}</div>
                  </div>
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">Designation</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.designation }}</div>
                  </div>
                  <div
                    class="col-5 col-md-3 bg-light border-bottom border-white border-3"
                  >
                    <div class="p-2">Location</div>
                  </div>
                  <div
                    class="col-7 col-md-9 bg-light border-start border-bottom border-white border-3"
                  >
                    <div class="p-2">{{ user.location }}</div>
                  </div>
                </div>
                
              </div>
              <div
                *ngIf="activeTab === 'profile'"
                [class.show]="activeTab === 'profile'"
                [class.active]="activeTab === 'profile'"
                class="tab-pane fade"
                id="profile-tab-pane"
                role="tabpanel"
                aria-labelledby="profile-tab"
                tabindex="0"
              >
                <form
                  action="#!"
                  (ngSubmit)="submitForm()"
                  class="row gy-3 gy-xxl-4"
                >
                  <div class="col-12">
                    <div class="row gy-2">
                      <div class="col-12 profile-pic-container">
                        <img
                          [src]="user.profilePicture"
                          class="img-fluid"
                          alt="Profile Picture"
                        />
                      </div>
                      <div id="editProfile" class="col-12">
                        <label class="btn">
                          Edit Profile Photo
                          <input
                            type="file"
                            id="fileInput"
                            style="display: none"
                            (change)="onFileSelected($event)"
                          />
                        </label>
                      </div>
                    </div>
                  </div>
                  
                  <div class="col-12 col-md-6">
                    <label class="form-label">First Name</label>
                    <input
                      type="text"
                      class="form-control"
                      name="firstName"
                      [(ngModel)]="user.firstName"
                    />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label">Last Name</label>
                    <input
                      type="text"
                      class="form-control"
                      name="lastName"
                      [(ngModel)]="user.lastName"
                    />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label">Email</label>
                    <input
                      type="text"
                      class="form-control"
                      name="email"
                      [(ngModel)]="user.email"
                    />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label">Phone</label>
                    <input
                      type="text"
                      class="form-control"
                      name="phone"
                      [(ngModel)]="user.phone"
                    />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label">Department</label>
                    <input
                      type="text"
                      class="form-control"
                      name="departament"
                      [(ngModel)]="user.departament"
                    />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label">Designation</label>
                    <input
                      type="text"
                      class="form-control"
                      name="designation"
                      [(ngModel)]="user.designation"
                    />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label">Username</label>
                    <input
                      type="text"
                      class="form-control"
                      name="username"
                      [(ngModel)]="user.username"
                    />
                  </div>
                  <div class="col-12 col-md-6">
                    <label class="form-label">Location</label>
                    <input
                      type="text"
                      class="form-control"
                      name="location"
                      [(ngModel)]="user.location"
                    />
                  </div>
                  <div class="col-12">
                    <button type="submit" class="btn" [disabled]="!imageUrl" >Save Changes</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
